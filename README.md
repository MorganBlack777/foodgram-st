# Foodgram - платформа для кулинарных рецептов

## О проекте

Foodgram представляет собой полнофункциональную платформу для обмена кулинарными рецептами, разработанную с использованием Django 5. Основное предназначение сервиса - создание удобного пространства для публикации рецептов и организации процесса приготовления.

**Возможности системы:**
- Публикация авторских рецептов
- Добавление рецептов в избранное
- Подписки на интересных авторов
- Автоматическое формирование списка покупок
- Полноценный каталог рецептов для всех посетителей

**Разработчик:** Ежов Арсений

## Архитектура системы

### Ключевые компоненты
* **backend** - серверная часть с API и административным интерфейсом
  * `run_dev_server.sh` - запуск сервера разработки
  * `container-entry-point.sh` - точка входа для контейнера
  * `load_ingredients.py` - импорт базовых ингредиентов
  * `create_demo_data.py` - загрузка демонстрационных данных
* **frontend** - клиентская часть приложения
* **gateway / nginx** - прокси-сервер
* **db** - база данных PostgreSQL (опциональный контейнер)

### Вспомогательные элементы
* `infra` - конфигурация для изолированного запуска фронтенда
* `data` - предварительно подготовленный набор данных
* `docs` - техническая документация
* `postman-collection` - тестовые наборы для API

### Конфигурационные файлы
* `docker-compose.yaml` - настройка контейнеризации
* `docker-example.env` - шаблон переменных окружения
* `README.md` - данное руководство
* `setup.cfg` - настройки линтера

## Стек технологий

### Серверная часть
* Python 3.13
* Django 5.2
* Django REST Framework
* PostgreSQL

### Клиентская часть
* JavaScript
* React

### Инфраструктура
* Docker / Podman
* NGINX

## Руководство по развёртыванию

**Важно:** Первичный запуск системы может занять до 7 минут для полной инициализации.

Для загрузки демонстрационных данных активируйте переменную окружения `DEMO_DATA=1`.

**Учётные данные для демонстрационных пользователей:**
* Адрес: user<номер>@example.com
* Пароль: password123
* Пользователь user1@example.com имеет права администратора

**Процесс развёртывания:**
1. Автоматическая загрузка конфигурационных файлов
2. Запуск контейнеров через выбранный механизм

### Запуск с локальной сборкой контейнеров
```bash
git clone git@github.com:MorganBlack777/foodgram-st.git
cd foodgram-st
```

**Подготовка и запуск:**
```bash
cp ./docker-example.env ./docker.env  # Создание конфигурационного файла
# Отредактируйте docker.env при необходимости
docker-compose build 
docker-compose up
```

### Запуск только серверной части

**Настройка изолированного окружения:**
```bash
python3 -m venv venv
source venv/bin/activate
```

**Важно:** Система автоматически загружает настройки из файла `backend/.env`. При необходимости использования другого файла конфигурации, загрузите его вручную:

```bash
set -a
source путь/к/файлу.env
```

**Внимание:** Параметр `DEBUG=1` не только активирует режим отладки, но и переключает сервер на самостоятельную обработку статических файлов без использования nginx.

#### Производственный режим
**Вариант 1:**
```bash
cd backend
set -a
source .env
python3 -m gunicorn --bind 0.0.0.0:8000 backend.wsgi
```

**Вариант 2:**
```bash
cd backend
DEBUG=0 ./run_dev_server.sh
```

#### Режим разработки
```bash
cd backend
DEBUG=1 ./run_dev_server.sh
```

## Тестирование

**Внимание:** Тесты несовместимы с демо-данными (за исключением базового набора ингредиентов).

### Проверка кода
```bash
ruff check backend/
```

```bash
flake8 | grep W
flake8 | grep E
```

### API-тесты
Инструкции по тестированию API доступны в каталоге `postman_collection`
