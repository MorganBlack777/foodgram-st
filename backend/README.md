# Бэкенд проекта Foodgram

Данный каталог содержит серверную часть проекта Foodgram - сервиса для публикации и обмена кулинарными рецептами.

## Структура проекта

- `backend/` - Настройки проекта Django
- `core/` - Базовые утилиты и функциональность
- `ingredient/` - Модели и API для работы с ингредиентами
- `recipe/` - Модели и API для работы с рецептами
- `user/` - Модели и API для работы с пользователями
- `data/` - Файлы данных для импорта в базу данных

## Установка и запуск

### Локальная разработка

1. Создайте и активируйте виртуальное окружение:
   ```
   python -m venv venv
   # На Linux/macOS:
   source venv/bin/activate
   # На Windows:
   venv\Scripts\activate
   ```

2. Установите зависимости:
   ```
   pip install -r requirements.txt
   ```

3. Примените миграции базы данных:
   ```
   python manage.py migrate
   ```

4. Загрузите начальные данные:
   ```
   python load_ingredients.py
   ```

5. Опционально загрузите демонстрационные данные:
   ```
   python create_demo_data.py
   ```

6. Запустите сервер для разработки:
   ```
   python manage.py runserver
   ```

### Использование Docker

Проект включает Dockerfile для контейнерного развёртывания, что позволяет запускать приложение в изолированной среде.

## Скрипты для импорта данных

### load_ingredients.py

Этот скрипт импортирует ингредиенты из файла `data/ingredients.json` в базу данных.

```
python load_ingredients.py
```

### create_demo_data.py

Скрипт создаёт тестовых пользователей и рецепты со следующим содержанием:

- Пользователи:
  - user1 (Иван Иванов)
  - user2 (Мария Смирнова)
  - user3 (Алексей Петров)

- Рецепты:
  - Блины (от user1)
  - Окрошка (от user2)
  - Борщ (от user3)

```
python create_demo_data.py
```

## Переменные окружения

- `DEBUG` - Установите 1 для режима разработки, 0 для производственного режима
- `SECRET_KEY` - Секретный ключ Django
- `POSTGRES_DB` - Название базы данных PostgreSQL
- `POSTGRES_USER` - Имя пользователя PostgreSQL
- `POSTGRES_PASSWORD` - Пароль PostgreSQL
- `DB_HOST` - Хост PostgreSQL
- `DB_PORT` - Порт PostgreSQL
- `USE_SQLITE` - Установите 1 для использования SQLite вместо PostgreSQL
- `DEMO_DATA` - Установите 1 для автоматической загрузки демонстрационных данных при запуске

## Документация по API

Документация по API доступна по адресу `/api/docs/` при запущенном сервере. Она содержит информацию о всех эндпоинтах, методах запросов и форматах ответов.

## Особенности реализации

- Аутентификация и авторизация на основе токенов
- Фильтрация рецептов по нескольким параметрам
- Система подписок на авторов
- Добавление рецептов в избранное
- Формирование списка покупок на основе рецептов
- Загрузка изображений для рецептов и аватаров пользователей 